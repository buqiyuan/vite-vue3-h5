import{r as e,o as t,n as a,w as o,c as l,a as s,b as i,d as n,e as r,f as c,g as d,m as u,u as f,h as v,i as p,j as h,k as m,F as x,l as g,p as b,q as w,K as k,s as y,t as B,v as I,x as T,y as C}from"./index-d996e3ab.js";import{o as z,w as A,a as _,u as D,i as S,b as j,c as P,n as R,m as $,d as H,e as O,f as V,g as F,h as L,j as q,k as E,l as K,p as G,t as J,H as M,B as N,I as Q,q as U,r as W,s as X,v as Y,x as Z,y as ee,z as te}from"./index-e2ae0122.js";import{c as ae}from"./interceptor-41f3f691.js";function oe(s,i){const n=((l,s)=>{const i=e(),n=()=>{i.value=D(l).height};return t((()=>{if(a(n),s)for(let e=1;e<=3;e++)setTimeout(n,100*e)})),z((()=>a(n))),o([A,_],n),i})(s,!0);return e=>l("div",{class:i("placeholder"),style:{height:n.value?"".concat(n.value,"px"):void 0}},[e()])}const[le,se]=P("sticky");const ie=G(n({name:le,props:{zIndex:R,position:$("top"),container:Object,offsetTop:H(0),offsetBottom:H(0)},emits:["scroll","change"],setup(t,{emit:n,slots:d}){const u=e(),f=O(u),v=r({fixed:!1,width:0,height:0,transform:0}),p=e(!1),h=c((()=>L("top"===t.position?t.offsetTop:t.offsetBottom))),m=c((()=>{if(p.value)return;const{fixed:e,height:t,width:a}=v;return e?{width:"".concat(a,"px"),height:"".concat(t,"px")}:void 0})),x=c((()=>{if(!v.fixed||p.value)return;const e=q(E(t.zIndex),{width:"".concat(v.width,"px"),height:"".concat(v.height,"px"),[t.position]:"".concat(h.value,"px")});return v.transform&&(e.transform="translate3d(0, ".concat(v.transform,"px, 0)")),e})),g=()=>{if(!u.value||F(u))return;const{container:e,position:a}=t,o=D(u),l=K(window);if(v.width=o.width,v.height=o.height,"top"===a)if(e){const t=D(e),a=t.bottom-h.value-v.height;v.fixed=h.value>o.top&&t.bottom>0,v.transform=a<0?a:0}else v.fixed=h.value>o.top;else{const{clientHeight:t}=document.documentElement;if(e){const a=D(e),l=t-a.top-h.value-v.height;v.fixed=t-h.value<o.bottom&&t>a.top,v.transform=l<0?-l:0}else v.fixed=t-h.value<o.bottom}(e=>{n("scroll",{scrollTop:e,isFixed:v.fixed})})(l)};return o((()=>v.fixed),(e=>n("change",e))),V("scroll",g,{target:f,passive:!0}),function(e,t){if(!S||!window.IntersectionObserver)return;const a=new IntersectionObserver((e=>{t(e[0].intersectionRatio>0)}),{root:document.body}),o=()=>{e.value&&a.unobserve(e.value)};s(o),i(o),j((()=>{e.value&&a.observe(e.value)}))}(u,g),o([A,_],(()=>{u.value&&!F(u)&&v.fixed&&(p.value=!0,a((()=>{const e=D(u);v.width=e.width,v.height=e.height,p.value=!1})))})),()=>{var e;return l("div",{ref:u,style:m.value},[l("div",{class:se({fixed:v.fixed&&!p.value}),style:x.value},[null==(e=d.default)?void 0:e.call(d)])])}}})),[ne,re]=P("nav-bar");const ce=G(n({name:ne,props:{title:String,fixed:Boolean,zIndex:R,border:J,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:J},emits:["clickLeft","clickRight"],setup(t,{emit:a,slots:o}){const s=e(),i=oe(s,re),n=e=>{t.leftDisabled||a("clickLeft",e)},r=e=>{t.rightDisabled||a("clickRight",e)},c=()=>{const{title:e,fixed:a,border:i,zIndex:c}=t,d=E(c),u=t.leftArrow||t.leftText||o.left,f=t.rightText||o.right;return l("div",{ref:s,style:d,class:[re({fixed:a}),{[N]:i,"van-safe-area-top":t.safeAreaInsetTop}]},[l("div",{class:re("content")},[u&&l("div",{class:[re("left",{disabled:t.leftDisabled}),t.clickable&&!t.leftDisabled?M:""],onClick:n},[o.left?o.left():[t.leftArrow&&l(Q,{class:re("arrow"),name:"arrow-left"},null),t.leftText&&l("span",{class:re("text")},[t.leftText])]]),l("div",{class:[re("title"),"van-ellipsis"]},[o.title?o.title():e]),f&&l("div",{class:[re("right",{disabled:t.rightDisabled}),t.clickable&&!t.rightDisabled?M:""],onClick:r},[o.right?o.right():l("span",{class:re("text")},[t.rightText])])])])};return()=>t.fixed&&t.placeholder?i(c):c()}})),[de,ue]=P("tabbar"),fe={route:Boolean,fixed:J,border:J,zIndex:R,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:H(0),safeAreaInsetBottom:{type:Boolean,default:null}},ve=Symbol(de);const pe=G(n({name:de,props:fe,emits:["change","update:modelValue"],setup(t,{emit:a,slots:o}){const s=e(),{linkChildren:i}=U(ve),n=oe(s,ue),r=()=>{var e;return null!=(e=t.safeAreaInsetBottom)?e:t.fixed},c=()=>{var e;const{fixed:a,zIndex:i,border:n}=t;return l("div",{ref:s,role:"tablist",style:E(i),class:[ue({fixed:a}),{[W]:n,"van-safe-area-bottom":r()}]},[null==(e=o.default)?void 0:e.call(o)])};return i({props:t,setActive:(e,o)=>{ae(t.beforeChange,{args:[e],done(){a("update:modelValue",e),a("change",e),o()}})}}),()=>t.fixed&&t.placeholder?n(c):c()}})),[he,me]=P("tabbar-item");const xe=G(n({name:he,props:q({},X,{dot:Boolean,icon:String,name:R,badge:R,badgeProps:Object,iconPrefix:String}),emits:["click"],setup(e,{emit:t,slots:a}){const o=Y(),s=d().proxy,{parent:i,index:n}=Z(ve);if(!i)return;const r=c((()=>{var t;const{route:a,modelValue:o}=i.props;if(a&&"$route"in s){const{$route:t}=s,{to:a}=e,o=te(a)?a:{path:a};return!!t.matched.find((e=>{const t="path"in o&&o.path===e.path,a="name"in o&&o.name===e.name;return t||a}))}return(null!=(t=e.name)?t:n.value)===o})),f=a=>{var l;r.value||i.setActive(null!=(l=e.name)?l:n.value,o),t("click",a)},v=()=>a.icon?a.icon({active:r.value}):e.icon?l(Q,{name:e.icon,classPrefix:e.iconPrefix},null):void 0;return()=>{var t;const{dot:o,badge:s}=e,{activeColor:n,inactiveColor:c}=i.props,d=r.value?n:c;return l("div",{role:"tab",class:me({active:r.value}),style:{color:d},tabindex:0,"aria-selected":r.value,onClick:f},[l(ee,u({dot:o,class:me("icon"),content:s},e.badgeProps),{default:v}),l("div",{class:me("text")},[null==(t=a.default)?void 0:t.call(a,{active:r.value})])])}}})),ge={class:"container"},be=n({name:"Layout",__name:"index",setup(t){f((e=>({a8c3d6e4:i.value})));const o=e(),s=e(),i=e("");return a((()=>{var e,t,a;i.value="".concat((null==(t=null==(e=o.value)?void 0:e.$el)?void 0:t.offsetHeight)+(null==(a=s.value)?void 0:a.$el.offsetHeight),"px")})),(e,t)=>{const a=Q,i=ce,n=ie,r=v("router-view"),c=xe,d=pe;return g(),p(x,null,[l(n,{ref_key:"stickyRef",ref:o},{default:h((()=>{var t;return[l(i,{title:null==(t=e.$route.meta)?void 0:t.title},{left:h((()=>[l(a,{name:"wap-nav",size:"18"})])),right:h((()=>[l(a,{name:"search",size:"18"})])),_:1},8,["title"])]})),_:1},512),m("div",ge,[l(r,null,{default:h((({Component:e})=>[(g(),b(k,null,[(g(),b(w(e)))],1024))])),_:1})]),l(d,{ref_key:"tabbarRef",ref:s,route:""},{default:h((()=>[(g(!0),p(x,null,y(T(C),(e=>{var t;return g(),b(c,{key:e.name,to:e.path,icon:null==(t=e.meta)?void 0:t.icon},{default:h((()=>{var t;return[B(I(null==(t=e.meta)?void 0:t.title),1)]})),_:2},1032,["to","icon"])})),128))])),_:1},512)],64)}}});export{be as default};
